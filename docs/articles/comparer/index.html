<!DOCTYPE html>
<html lang="ru-ru"><head>
    <title>–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤ C#</title>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="description" content="–î—É–º–∞—é, —á—Ç–æ –∫–∞–∂–¥—ã–π –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç —Ä–∞–Ω–æ –∏–ª–∏ –ø–æ–∑–¥–Ω–æ —Å—Ç–∞–ª–∫–∏–≤–∞–µ—Ç—Å—è —Å –∫–æ–¥–æ–º, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç ¬´–Ω–µ —Ç–∞–∫, –∫–∞–∫ —Ç—ã –æ—Ç –Ω–µ–≥–æ –æ–∂–∏–¥–∞–µ—à—å¬ª. –ò–º–µ–Ω–Ω–æ —ç—Ç–æ –∏ –ø–æ–¥—Ç–æ–ª–∫–Ω—É–ª–æ –º–µ–Ω—è –∫ –Ω–∞–ø–∏—Å–∞–Ω–∏—é —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç–∞—Ç—å–∏, –≤ –∫–æ—Ç–æ—Ä–æ–π —è –ø—ã—Ç–∞—é—Å—å –ø–æ–Ω—è—Ç—å, –ø–æ—á–µ–º—É Except –≤ Linq —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫, –∫–∞–∫ –Ω–∞–ø–∏—Å–∞–Ω, –∞ –Ω–µ —Ç–∞–∫, –∫–∞–∫ —è —Ö–æ—á—É." />
    <meta property="og:type" content="article" />
    <meta property="og:image" content="https://alexandrv.ru/asserts/images/logo.jpg" />
    <meta property="og:url" content="https://alexandrv.ru/articles/comparer/" />
    <meta property="og:description" content="–î—É–º–∞—é, —á—Ç–æ –∫–∞–∂–¥—ã–π –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç —Ä–∞–Ω–æ –∏–ª–∏ –ø–æ–∑–¥–Ω–æ —Å—Ç–∞–ª–∫–∏–≤–∞–µ—Ç—Å—è —Å –∫–æ–¥–æ–º, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç ¬´–Ω–µ —Ç–∞–∫, –∫–∞–∫ —Ç—ã –æ—Ç –Ω–µ–≥–æ –æ–∂–∏–¥–∞–µ—à—å¬ª. –ò–º–µ–Ω–Ω–æ —ç—Ç–æ –∏ –ø–æ–¥—Ç–æ–ª–∫–Ω—É–ª–æ –º–µ–Ω—è –∫ –Ω–∞–ø–∏—Å–∞–Ω–∏—é —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç–∞—Ç—å–∏, –≤ –∫–æ—Ç–æ—Ä–æ–π —è –ø—ã—Ç–∞—é—Å—å –ø–æ–Ω—è—Ç—å, –ø–æ—á–µ–º—É Except –≤ Linq —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫, –∫–∞–∫ –Ω–∞–ø–∏—Å–∞–Ω, –∞ –Ω–µ —Ç–∞–∫, –∫–∞–∫ —è —Ö–æ—á—É." />
    <style>
@import "https://fonts.googleapis.com/css2?family=Inconsolata&display=swap";:root{--cursor-visibility:hidden}html,body{width:100%;height:100%;overflow:auto;font-family:inconsolata,monospace;font-size:4vmin;line-height:4.1vmin;font-weight:400}body{margin:0;display:flex;flex-direction:row;justify-content:center;align-items:center}#content{min-width:82vmin;min-height:82vmin}::-webkit-scrollbar{width:10px}::-webkit-scrollbar-track{border-radius:10px;box-shadow:inset 0 0 1px white}::-webkit-scrollbar-thumb{border-radius:10px;box-shadow:0 0 0 1px white}.cursor,#activity-title:after,#activity-content:after,#cd:after,#whoami:after,#cat:after,#tree:after{visibility:var(--cursor-visibility);content:"|";overflow:hidden;color:#fff;animation:blink 500ms linear infinite alternate}@keyframes blink{0%{opacity:0}100%{opacity:1}}@media only screen and (min-width:768px){body{font-size:2.5vmin;line-height:2.6vmin}#content{min-width:60vmin}}:root{--cursor-visibility:hidden}body{align-items:unset;overflow-y:scroll}#content{max-width:80vmin}pre{overflow-x:scroll;white-space:pre}@keyframes blink{0%{opacity:0}100%{opacity:1}}















    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
        
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    



body{background:#1b1d1e}body #terminal{color:#BBBBBB}body #user{color:#23E298}body #dir{color:#D08010}body .Typewriter__cursor{color:#BBBBBB}a{color:#BBBBBB}

        
.navFull {
    background-color: #353535;
    font-family: "Courier New";
    font-size: 17px;
    display: inline;
    position: fixed;
    bottom: 0px;
    left: 0px;
    width: 100%;
    padding-top: 5px;
    padding: 10px;
    padding-bottom: 0px;
}

.navCredits {
    float: right;
    padding-right: 18px;
    padding-bottom: 10px;
    padding-top: 5px;
}

#content::after {
    content: "\a\a";
    white-space: pre;
}
        
        
</style>



    <meta name="yandex-verification" content="355904de153d5134" />
    
    
    <script>window.yaContextCb = window.yaContextCb || []</script>
    <script src="https://yandex.ru/ads/system/context.js" async></script>

    <script type="text/javascript">
            (function (m, e, t, r, i, k, a) {
                m[i] = m[i] || function () { (m[i].a = m[i].a || []).push(arguments) };
                m[i].l = 1 * new Date();
                for (var j = 0; j < document.scripts.length; j++) { if (document.scripts[j].src === r) { return; } }
                k = e.createElement(t), a = e.getElementsByTagName(t)[0], k.async = 1, k.src = r, a.parentNode.insertBefore(k, a)
            })
            (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

        ym(90533415, "init", {
            clickmap: true,
            trackLinks: true,
            accurateTrackBounce: true
        });
    </script>
    <noscript>
        <div><img src="https://mc.yandex.ru/watch/90533415" style="position:absolute; left:-9999px;" alt="" /></div>
    </noscript>
    


</head><body><div id="content">
<div id="block">

    <div id="yandex_rtb_R-A-1957258-2"></div>
    <script>window.yaContextCb.push(() => {
            Ya.Context.AdvManager.render({
                renderTo: 'yandex_rtb_R-A-1957258-2',
                blockId: 'R-A-1957258-2'
            })
        })</script>
</div>
<meta property="og:title" content="–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤ C#"/>


    
    
    



    


    <span id='terminal'><h1 id='title'>–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤ C#</h1><span id='date'>2021-11-20 17:23:23 +0300 MSK</span></span>

    <span id=''><h2 id="–ø—Ä–µ–¥–∏—Å–ª–æ–≤–∏–µ">–ü—Ä–µ–¥–∏—Å–ª–æ–≤–∏–µ</h2>
<p>–ê–≤—Ç–æ—Ä –∑–Ω–∞–µ—Ç, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤ C#, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —á–µ—Ç–∫–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É —Å–µ–º–∞–Ω—Ç–∏–∫–æ–π –∑–Ω–∞—á–∏–º–æ–≥–æ –∏ —Å—Å—ã–ª–æ—á–Ω–æ–≥–æ —Ç–∏–ø–æ–≤, –æ–¥–Ω–∞–∫–æ –≤—Å–µ –µ—â–µ –Ω–∞—Ö–æ–¥–∏—Ç —ç—Ç—É —Å—Ç–∞—Ç—å—é —Ö–æ—Ä–æ—à–µ–π –∏ –ø–æ–∑–≤–æ–ª—è—é—â–µ–π —á—É—Ç—å –≥–ª—É–±–∂–µ –∑–∞–≥–ª—è–Ω—É—Ç—å –ø–æ–¥ –∫–∞–ø–æ—Ç.</p>
<hr>
<p>–î—É–º–∞—é, —á—Ç–æ –∫–∞–∂–¥—ã–π –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç —Ä–∞–Ω–æ –∏–ª–∏ –ø–æ–∑–¥–Ω–æ —Å—Ç–∞–ª–∫–∏–≤–∞–µ—Ç—Å—è —Å –∫–æ–¥–æ–º, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç ¬´–Ω–µ —Ç–∞–∫, –∫–∞–∫ —Ç—ã –æ—Ç –Ω–µ–≥–æ –æ–∂–∏–¥–∞–µ—à—å¬ª. –ò–º–µ–Ω–Ω–æ —ç—Ç–æ –∏ –ø–æ–¥—Ç–æ–ª–∫–Ω—É–ª–æ –º–µ–Ω—è –∫ –Ω–∞–ø–∏—Å–∞–Ω–∏—é —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç–∞—Ç—å–∏, –≤ –∫–æ—Ç–æ—Ä–æ–π —è –ø—ã—Ç–∞—é—Å—å –ø–æ–Ω—è—Ç—å, –ø–æ—á–µ–º—É Except –≤ Linq —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫, –∫–∞–∫ –Ω–∞–ø–∏—Å–∞–Ω, –∞ –Ω–µ —Ç–∞–∫, –∫–∞–∫ —è —Ö–æ—á—É.</p>
<hr>
<p>–ß—Ç–æ, –ø–æ –≤–∞—à–µ–º—É –º–Ω–µ–Ω–∏—é, –¥–æ–ª–∂–µ–Ω –≤—ã–≤–µ—Å—Ç–∏ —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–¥:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-csharp" data-lang="csharp"><span style="color:#66d9ef">var</span> documentsDir = <span style="color:#66d9ef">new</span> DirectoryInfo(Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments));

FileInfo[] FirstDirrectoryFiles = documentsDir.GetFiles();
FileInfo[] SecondDirrectoryFiles = documentsDir.GetFiles();
<span style="color:#66d9ef">foreach</span> (FileInfo item <span style="color:#66d9ef">in</span> FirstDirrectoryFiles.Except(SecondDirrectoryFiles))
{
    Console.WriteLine(item.Name);
}
</code></pre></div><p>–Ø –≤–æ—Ç –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏–ª, —á—Ç–æ –Ω–∏—á–µ–≥–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ Except –¥–æ–ª–∂–µ–Ω –≤—ã—á–∏—Ç–∞—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ (IEnumerable) –ø—Ä–∞–≤–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –∏–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ (IEnumerable) –ª–µ–≤–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞. –û–¥–Ω–∞–∫–æ, –≤–æ–ø—Ä–µ–∫–∏ –º–æ–∏–º –æ–∂–∏–¥–∞–Ω–∏—è–º —è –ø–æ–ª—É—á–∏–ª:</p>
<p><img src="/asserts/images/comparer_1.png" alt=""></p>
<p>–í–Ω–µ –≤—Å—è–∫–æ–≥–æ —Å–æ–º–Ω–µ–Ω–∏—è ‚Äî —ç—Ç–æ –Ω–µ –ø–æ—Ö–æ–∂–µ –Ω–∞ –ø—É—Å—Ç–æ–µ –º–Ω–æ–∂–µ—Å—Ç–≤–æ. –î–∞–≤–∞–π—Ç–µ –ø–æ–ø—Ä–æ–±—É–µ–º —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –≤ —Ç–æ–º, –ø–æ—á–µ–º—É —Ç–∞–∫ –ø–æ–ª—É—á–∞–µ—Ç—Å—è (—Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ .NET 5 –∏ –≤ .NET 6 ‚Äî —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–µ–Ω). –ß—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å, –ø–æ—á–µ–º—É —Ç–∞–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –∏ —á—Ç–æ –º–æ–∂–Ω–æ —Å —ç—Ç–∏–º —Å–¥–µ–ª–∞—Ç—å –æ–±—Ä–∞—Ç–∏–º—Å—è –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –º–µ—Ç–æ–¥–∞ <a href="https://docs.microsoft.com/ru-ru/dotnet/api/system.linq.enumerable.except?view=net-6.0">Except</a>. –¢–∞–º –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω–∞–ø–∏—Å–∞–Ω–æ, —á—Ç–æ —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ ¬´–ù–∞—Ö–æ–¥–∏—Ç —Ä–∞–∑–Ω–æ—Å—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –¥–≤—É–º—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—è–º–∏¬ª –∏ –∏–º–µ–µ—Ç –¥–≤–µ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏:</p>
<ul>
<li><code>Except&lt;TSource&gt;(IEnumerable&lt;TSource&gt;, IEnumerable&lt;TSource&gt;)</code> –ù–∞—Ö–æ–¥–∏—Ç —Ä–∞–∑–Ω–æ—Å—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –¥–≤—É–º—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—è–º–∏, –∏—Å–ø–æ–ª—å–∑—É—è –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–π –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ —Ä–∞–≤–µ–Ω—Å—Ç–≤–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.</li>
<li><code>Except&lt;TSource&gt;(IEnumerable&lt;TSource&gt;, IEnumerable&lt;TSource&gt;, IEqualityComparer&lt;TSource&gt;)</code>. –ù–∞—Ö–æ–¥–∏—Ç —Ä–∞–∑–Ω–æ—Å—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –¥–≤—É–º—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—è–º–∏, –∏—Å–ø–æ–ª—å–∑—É—è –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–π —É–∫–∞–∑–∞–Ω–Ω—ã–π –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä IEqualityComparer<!-- raw HTML omitted -->.</li>
</ul>
<p>–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –∑–∞—è–≤–ª–µ–Ω–∏–µ –æ —Ç–æ–º, —á—Ç–æ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. –ß—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å, –ø–æ—á–µ–º—É –Ω–∞—à –∫–æ–¥ —Å—Ä–∞–±–æ—Ç–∞–ª –∏–º–µ–Ω–Ω–æ —Ç–∞–∫, –∫–∞–∫ —Å—Ä–∞–±–æ—Ç–∞–ª, –Ω–∞–º –ø—Ä–µ–¥—Å—Ç–æ–∏—Ç —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è —Å –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. –î–ª—è —ç—Ç–æ–≥–æ —è –ø—Ä–µ–¥–ª–∞–≥–∞—é –ø—Ä–æ—Å–ª–µ–¥–æ–≤–∞—Ç—å –Ω–∞ <a href="https://github.com/dotnet/runtime/">https://github.com/dotnet/runtime/</a> –∏ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É –º–µ—Ç–æ–¥–∞ Except.</p>
<p>–ù–∞—à–∞ <a href="https://github.com/dotnet/runtime/blob/a7c69745a4e22757c69f65d2a750e2d6923e1186/src/libraries/System.Linq/src/System/Linq/Except.cs#L10">—Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞</a>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-csharp" data-lang="csharp"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> IEnumerable&lt;TSource&gt; Except&lt;TSource&gt;(<span style="color:#66d9ef">this</span> IEnumerable&lt;TSource&gt; first, IEnumerable&lt;TSource&gt; second)
{
    <span style="color:#66d9ef">if</span> (first == <span style="color:#66d9ef">null</span>)
    {
        ThrowHelper.ThrowArgumentNullException(ExceptionArgument.first);
    }

    <span style="color:#66d9ef">if</span> (second == <span style="color:#66d9ef">null</span>)
    {
        ThrowHelper.ThrowArgumentNullException(ExceptionArgument.second);
    }

    <span style="color:#66d9ef">return</span> ExceptIterator(first, second, <span style="color:#66d9ef">null</span>);
}
</code></pre></div><p>–ú–µ—Ç–æ–¥ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –ø–æ–ª—É—á–∏–ª –¥–≤–∞ –æ–±—ä–µ–∫—Ç–∞ —Å –Ω–µ–Ω—É–ª–µ–≤—ã–º —É–∫–∞–∑–∞—Ç–µ–ª–µ–º –∏ –ø–µ—Ä–µ–¥–∞–µ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç—ã –≤ <a href="https://github.com/dotnet/runtime/blob/a7c69745a4e22757c69f65d2a750e2d6923e1186/src/libraries/System.Linq/src/System/Linq/Except.cs#L79">ExceptIterator</a>.</p>
<p>–°—Ç—Ä–æ–≥–æ –≥–æ–≤–æ—Ä—è, –º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏ –º–µ—Ç–æ–¥ –ø–µ—Ä–µ–≥—Ä—É–∑–∫—É, —Ç–∞–∫ –∫–∞–∫ –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –±—É–∫–≤–∞–ª—å–Ω–æ —Ç–∞–∫–∂–µ:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-csharp" data-lang="csharp"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> IEnumerable&lt;TSource&gt; Except&lt;TSource&gt;(<span style="color:#66d9ef">this</span> IEnumerable&lt;TSource&gt; first, IEnumerable&lt;TSource&gt; second, IEqualityComparer&lt;TSource&gt;? comparer)
{
    <span style="color:#66d9ef">if</span> (first == <span style="color:#66d9ef">null</span>)
    {
        ThrowHelper.ThrowArgumentNullException(ExceptionArgument.first);
    }

    <span style="color:#66d9ef">if</span> (second == <span style="color:#66d9ef">null</span>)
    {
        ThrowHelper.ThrowArgumentNullException(ExceptionArgument.second);
    }

    <span style="color:#66d9ef">return</span> ExceptIterator(first, second, comparer);
}
</code></pre></div><p>–ü–æ—á–µ–º—É –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞, –∞ –Ω–µ –ø–∞—Ä–∞–º–µ—Ç—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é? –°–∏–ª–∞–º–∏ <a href="https://t.me/dotnettalks">—Å–æ–æ–±—â–µ—Å—Ç–≤–∞</a> –±—ã–ª–æ –≤—ã–Ω–µ—Å–µ–Ω–æ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–µ, —á—Ç–æ –¥–µ–ª–æ –≤ <a href="https://coding.abel.nu/2014/07/adding-an-overload-is-a-breaking-change/">—ç—Ç–æ–º</a> –∏ <a href="https://rules.sonarsource.com/csharp/RSPEC-2360">—ç—Ç–æ–º</a>.</p>
<p>–°–æ–±—Å—Ç–≤–µ–Ω–Ω–æ –∫–æ–¥ <a href="https://github.com/dotnet/runtime/blob/a7c69745a4e22757c69f65d2a750e2d6923e1186/src/libraries/System.Linq/src/System/Linq/Except.cs#L79">ExceptIterator</a>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-csharp" data-lang="csharp"><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> IEnumerable&lt;TSource&gt; ExceptIterator&lt;TSource&gt;(IEnumerable&lt;TSource&gt; first, IEnumerable&lt;TSource&gt; second, IEqualityComparer&lt;TSource&gt;? comparer)
{
    <span style="color:#66d9ef">var</span> <span style="color:#66d9ef">set</span> = <span style="color:#66d9ef">new</span> HashSet&lt;TSource&gt;(second, comparer);

    <span style="color:#66d9ef">foreach</span> (TSource element <span style="color:#66d9ef">in</span> first)
    {
        <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">set</span>.Add(element))
        {
            <span style="color:#66d9ef">yield</span> <span style="color:#66d9ef">return</span> element;
        }
    }
}

</code></pre></div><p>–ò–∑ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤—Ç–æ—Ä–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è <a href="https://github.com/dotnet/runtime/blob/57bfe474518ab5b7cfe6bf7424a79ce3af9d6657/src/libraries/System.Private.CoreLib/src/System/Collections/Generic/HashSet.cs#L55">–º–Ω–æ–∂–µ—Å—Ç–≤–æ</a>. –≠–ª–µ–º–µ–Ω—Ç—ã –ø–µ—Ä–≤–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–µ —É–¥–∞–ª–æ—Å—å –¥–æ–±–∞–≤–∏—Ç—å –≤ –º–Ω–æ–∂–µ—Å—Ç–≤–æ, –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞.</p>
<p>–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –º–Ω–æ–∂–µ—Å—Ç–≤–∞:</p>
<p><img src="/asserts/images/comparer_2.png" alt=""></p>
<p>–ö–æ–Ω–∫—Ä–µ—Ç–Ω–æ –≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä —Ä–∞–≤–µ–Ω null, –ø–æ—ç—Ç–æ–º—É –ø—Ä–æ–≤–∞–ª–∏–≤–∞–µ–º—Å—è –≤ —Å–≤–æ–π—Å—Ç–≤–æ Default –æ–±–æ–±—â–µ–Ω–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞ EqualityComparer.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-csharp" data-lang="csharp"><span style="color:#66d9ef">public</span> HashSet(IEqualityComparer&lt;T&gt;? comparer)
{
    <span style="color:#66d9ef">if</span> (comparer <span style="color:#66d9ef">is</span> not <span style="color:#66d9ef">null</span> &amp;&amp; comparer != EqualityComparer&lt;T&gt;.Default) <span style="color:#75715e">// first check for null to avoid forcing default comparer instantiation unnecessarily
</span><span style="color:#75715e"></span>    {
        <span style="color:#ae81ff">_</span>comparer = comparer;
    }

    <span style="color:#75715e">// Special-case EqualityComparer&lt;string&gt;.Default, StringComparer.Ordinal, and StringComparer.OrdinalIgnoreCase.
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// We use a non-randomized comparer for improved perf, falling back to a randomized comparer if the
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// hash buckets become unbalanced.
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">typeof</span>(T) == <span style="color:#66d9ef">typeof</span>(<span style="color:#66d9ef">string</span>))
    {
        IEqualityComparer&lt;<span style="color:#66d9ef">string</span>&gt;? stringComparer = NonRandomizedStringEqualityComparer.GetStringComparer(<span style="color:#ae81ff">_</span>comparer);
        <span style="color:#66d9ef">if</span> (stringComparer <span style="color:#66d9ef">is</span> not <span style="color:#66d9ef">null</span>)
        {
            <span style="color:#ae81ff">_</span>comparer = (IEqualityComparer&lt;T&gt;?)stringComparer;
        }
    }
}
</code></pre></div><p><img src="/asserts/images/comparer_3.png" alt=""></p>
<p><a href="https://github.com/dotnet/runtime/blob/57bfe474518ab5b7cfe6bf7424a79ce3af9d6657/src/coreclr/System.Private.CoreLib/src/System/Collections/Generic/EqualityComparer.CoreCLR.cs#L10">–¢—É—Ç</a>, –Ω–∞ –º–æ–π —Å–∫—Ä–æ–º–Ω—ã–π –≤–∑–≥–ª—è–¥, –≤—Å–µ –æ—á–µ–≤–∏–¥–Ω–æ:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-csharp" data-lang="csharp"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">abstract</span> <span style="color:#66d9ef">partial</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">EqualityComparer</span>&lt;T&gt; : IEqualityComparer, IEqualityComparer&lt;T&gt;
{
    <span style="color:#75715e">// To minimize generic instantiation overhead of creating the comparer per type, we keep the generic portion of the code as small
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// as possible and define most of the creation logic in a non-generic class.
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> EqualityComparer&lt;T&gt; Default { [Intrinsic] <span style="color:#66d9ef">get</span>; } = (EqualityComparer&lt;T&gt;)ComparerHelpers.CreateDefaultEqualityComparer(<span style="color:#66d9ef">typeof</span>(T));
}

</code></pre></div><p>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≥–ª–∞—Å–∏—Ç, —á—Ç–æ —Å —Ü–µ–ª—å—é –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –∫–æ–¥ –æ–±–æ–±—â–µ–Ω–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤ —É–º–µ–Ω—å—à–∞—é—Ç –Ω–∞—Å–∫–æ–ª—å–∫–æ —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ –∑–∞ —Å—á–µ—Ç –ø–µ—Ä–µ–Ω–æ—Å–∞ –µ–≥–æ –ª–æ–≥–∏–∫–∏ –≤ –Ω–µ–æ–±–æ–±—â–µ–Ω–Ω—ã–π –∫–ª–∞—Å—Å (–≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ —ç—Ç–æ ComparerHelpers).</p>
<p>–î–∞–≤–∞–π—Ç–µ –∂–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ —Ç–æ, –∫–∞–∫ <a href="https://github.com/dotnet/runtime/blob/57bfe474518ab5b7cfe6bf7424a79ce3af9d6657/src/coreclr/System.Private.CoreLib/src/System/Collections/Generic/ComparerHelpers.cs#L116">–ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é</a>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-csharp" data-lang="csharp"><span style="color:#66d9ef">internal</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">object</span> CreateDefaultEqualityComparer(Type type)
{
    Debug.Assert(type != <span style="color:#66d9ef">null</span> &amp;&amp; type <span style="color:#66d9ef">is</span> RuntimeType);

    <span style="color:#66d9ef">object?</span> result = <span style="color:#66d9ef">null</span>;
    <span style="color:#66d9ef">var</span> runtimeType = (RuntimeType)type;

    <span style="color:#66d9ef">if</span> (type == <span style="color:#66d9ef">typeof</span>(<span style="color:#66d9ef">byte</span>))
    {
        <span style="color:#75715e">// Specialize for byte so Array.IndexOf is faster.
</span><span style="color:#75715e"></span>        result = <span style="color:#66d9ef">new</span> ByteEqualityComparer();
    }
    <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (type == <span style="color:#66d9ef">typeof</span>(<span style="color:#66d9ef">string</span>))
    {
        <span style="color:#75715e">// Specialize for string, as EqualityComparer&lt;string&gt;.Default is on the startup path
</span><span style="color:#75715e"></span>        result = <span style="color:#66d9ef">new</span> GenericEqualityComparer&lt;<span style="color:#66d9ef">string</span>&gt;();
    }
    <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (type.IsAssignableTo(<span style="color:#66d9ef">typeof</span>(IEquatable&lt;&gt;).MakeGenericType(type)))
    {
        <span style="color:#75715e">// If T implements IEquatable&lt;T&gt; return a GenericEqualityComparer&lt;T&gt;
</span><span style="color:#75715e"></span>        result = CreateInstanceForAnotherGenericParameter((RuntimeType)<span style="color:#66d9ef">typeof</span>(GenericEqualityComparer&lt;<span style="color:#66d9ef">string</span>&gt;), runtimeType);
    }
    <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (type.IsGenericType)
    {
        <span style="color:#75715e">// Nullable does not implement IEquatable&lt;T?&gt; directly because that would add an extra interface call per comparison.
</span><span style="color:#75715e"></span>        <span style="color:#75715e">// Instead, it relies on EqualityComparer&lt;T?&gt;.Default to specialize for nullables and do the lifted comparisons if T implements IEquatable.
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> (type.GetGenericTypeDefinition() == <span style="color:#66d9ef">typeof</span>(Nullable&lt;&gt;))
        {
            result = TryCreateNullableEqualityComparer(runtimeType);
        }
    }
    <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (type.IsEnum)
    {
        <span style="color:#75715e">// The equality comparer for enums is specialized to avoid boxing.
</span><span style="color:#75715e"></span>        result = TryCreateEnumEqualityComparer(runtimeType);
    }

    <span style="color:#66d9ef">return</span> result ?? CreateInstanceForAnotherGenericParameter((RuntimeType)<span style="color:#66d9ef">typeof</span>(ObjectEqualityComparer&lt;<span style="color:#66d9ef">object</span>&gt;), runtimeType);
}
</code></pre></div><p>–ü–æ–π–¥–µ–º –ø–æ –ø–æ—Ä—è–¥–∫—É:</p>
<ol>
<li>
<p>–ï—Å–ª–∏ —Ç–∏–ø –∞—Ä–≥—É–º–µ–Ω—Ç–∞ byte, —Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è —ç—Ç–æ–≥–æ —Ç–∏–ø–∞ (ByteEqualityComparer)</p>
</li>
<li>
<p>–ï—Å–ª–∏ —ç—Ç–æ —Å—Ç—Ä–æ–∫–∞, —Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è GenericEqualityComparer<!-- raw HTML omitted -->();</p>
</li>
<li>
<p>–ï—Å–ª–∏ —Ç–∏–ø —Ä–µ–∞–ª–∏–∑—É–µ—Ç IEquatable, —Ç–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ GenericEqualityComparer<!-- raw HTML omitted --> –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è GenericEqualityComparer –¥–ª—è —Ç–∏–ø–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ (–¥–∞–∂–µ –Ω–µ —Å–ø—Ä–∞—à–∏–≤–∞–π—Ç–µ);</p>
</li>
<li>
<p>–ï—Å–ª–∏ –∞—Ä–≥—É–º–µ–Ω—Ç —è–≤–ª—è–µ—Ç—Å—è —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–º —Ç–∏–ø–æ–º (–æ–±–æ–±—â–µ–Ω–∏–µ–º) –∏ –µ—Å–ª–∏ —ç—Ç–æ—Ç —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Ç–∏–ø Nullable&lt;&gt;,  <a href="https://github.com/dotnet/runtime/blob/57bfe474518ab5b7cfe6bf7424a79ce3af9d6657/src/coreclr/System.Private.CoreLib/src/System/Collections/Generic/ComparerHelpers.cs#L160">—Ç–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ</a> NullableEqualityComparer<!-- raw HTML omitted -->  —Å–æ–∑–¥–∞–µ—Ç—Å—è NullableEqualityComparer –¥–ª—è —Ç–∏–ø–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–∞;</p>
</li>
<li>
<p>–ï—Å–ª–∏ –∞—Ä–≥—É–º–µ–Ω—Ç ‚Äì –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ, <a href="https://github.com/dotnet/runtime/blob/57bfe474518ab5b7cfe6bf7424a79ce3af9d6657/src/coreclr/System.Private.CoreLib/src/System/Collections/Generic/ComparerHelpers.cs#L179">—Ç–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ</a> EnumEqualityComparer&lt;&gt; —Å–æ–∑–¥–∞–µ—Ç—Å—è EnumEqualityComparer;</p>
</li>
<li>
<p>–í–æ –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö –Ω–∞ –æ—Å–Ω–æ–≤–µ ObjectEqualityComparer<!-- raw HTML omitted --> —Å–æ–∑–¥–∞–µ—Ç—Å—è ObjectEqualityComparer.</p>
</li>
</ol>
<p>–° –ø–æ–º–æ—â—å—é —Ç–∞–∫–æ–≥–æ –Ω–µ—Ö–∏—Ç—Ä–æ–≥–æ –∫–æ–¥–∞ (—Ö–æ—Ç–µ–ª –±—ã–ª–æ –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å —á–µ—Ä–µ–∑ string builder, –Ω–æ, –¥—É–º–∞—é, —Ç—É—Ç –º–æ–∂–Ω–æ –∑–∞–±–∏—Ç—å :D) –ø–æ–ø—Ä–æ–±—É–µ–º –ø–æ–Ω—è—Ç—å, –∫–∞–∫–æ–π –∂–µ –∏–∑ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤ ‚Äì –Ω–∞—à:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-csharp" data-lang="csharp"><span style="color:#66d9ef">var</span> documentsDir = <span style="color:#66d9ef">new</span> DirectoryInfo(Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments));
FileInfo[] result1 = documentsDir.GetFiles();
FileInfo[] result2 = documentsDir.GetFiles();

Type type = result1[<span style="color:#ae81ff">0</span>].GetType();
Console.Write(
    <span style="color:#e6db74">$&#34;type == typeof(byte): {type == typeof(byte)}\n&#34;</span> +
    <span style="color:#e6db74">$&#34;type == typeof(string): {type == typeof(string)}\n&#34;</span> +
    <span style="color:#e6db74">$&#34;type.IsAssignableTo(typeof(IEquatable&lt;&gt;).MakeGenericType(type)): {type.IsAssignableTo(typeof(IEquatable&lt;&gt;).MakeGenericType(type))}\n&#34;</span> +
    <span style="color:#e6db74">$&#34;type.IsGenericType: {type.IsGenericType}\n&#34;</span> +
    <span style="color:#e6db74">$&#34;type.IsEnum: {type.IsEnum}\n\n&#34;</span>);
</code></pre></div><p>–ß—Ç–æ –∏ —Å–ª–µ–¥–æ–≤–∞–ª–æ –æ–∂–∏–¥–∞—Ç—å:</p>
<p><img src="/asserts/images/comparer_4.png" alt=""></p>
<p>–≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ —Ç–µ–ø–µ—Ä—å –Ω–∞—à –ø—É—Ç—å –ª–µ–∂–∏—Ç –≤ <a href="https://github.com/dotnet/runtime/blob/57bfe474518ab5b7cfe6bf7424a79ce3af9d6657/src/libraries/System.Private.CoreLib/src/System/Collections/Generic/EqualityComparer.cs">ObjectEqualityComparer</a>. –í–æ—Ç, —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ, –∏ –æ–Ω:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-csharp" data-lang="csharp"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">sealed</span> <span style="color:#66d9ef">partial</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ObjectEqualityComparer</span>&lt;T&gt; : EqualityComparer&lt;T&gt;
{
<span style="color:#a6e22e">    [MethodImpl(MethodImplOptions.AggressiveInlining)]</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">bool</span> Equals(T? x, T? y)
    {
        <span style="color:#66d9ef">if</span> (x != <span style="color:#66d9ef">null</span>)
        {
            <span style="color:#66d9ef">if</span> (y != <span style="color:#66d9ef">null</span>) <span style="color:#66d9ef">return</span> x.Equals(y);
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
        }
        <span style="color:#66d9ef">if</span> (y != <span style="color:#66d9ef">null</span>) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
    }
<span style="color:#a6e22e">
</span><span style="color:#a6e22e">    [MethodImpl(MethodImplOptions.AggressiveInlining)]</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">int</span> GetHashCode([DisallowNull] T obj) =&gt; obj?.GetHashCode() ?? <span style="color:#ae81ff">0</span>;

    <span style="color:#75715e">// Equals method for the comparer itself.
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">bool</span> Equals([NotNullWhen(<span style="color:#66d9ef">true</span>)] <span style="color:#66d9ef">object?</span> obj) =&gt;
        obj != <span style="color:#66d9ef">null</span> &amp;&amp; GetType() == obj.GetType();

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">int</span> GetHashCode() =&gt;
        GetType().GetHashCode();
}

</code></pre></div><p>ObjectEqualityComparer –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –º–µ—Ç–æ–¥ Equals –¥–ª—è –¥–≤—É—Ö –æ–±—ä–µ–∫—Ç–æ–≤ —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:</p>
<ul>
<li>
<p>–û–±—ä–µ–∫—Ç—ã —Ä–∞–≤–Ω—ã, –µ—Å–ª–∏ –æ–Ω–∏ –æ–±–∞ null (—á—Ç–æ –ª–æ–≥–∏—á–Ω–æ);</p>
</li>
<li>
<p>–û–±—ä–µ–∫—Ç—ã –Ω–µ —Ä–∞–≤–Ω—ã, –µ—Å–ª–∏ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –∏–∑ –Ω–∏—Ö null;</p>
</li>
<li>
<p>–ï—Å–ª–∏ –æ–±–∞ –æ–±—ä–µ–∫—Ç–∞ –Ω–µ null, —Ç–æ –∏—Ö —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ—Å—Ç—å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –º–µ—Ç–æ–¥–æ–º Equals ¬´–ª–µ–≤–æ–≥–æ¬ª –∞—Ä–≥—É–º–µ–Ω—Ç–∞.</p>
</li>
</ul>
<p>–ï—Å–ª–∏ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ <a href="https://docs.microsoft.com/ru-ru/dotnet/api/system.io.fileinfo?view=net-6.0#methods">–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏</a>, —Ç–æ –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å, —á—Ç–æ —É –Ω–∞—à–µ–≥–æ –∫–ª–∞—Å—Å–∞ FileInfo –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –µ—Å—Ç—å –º–µ—Ç–æ–¥ Equals —Å –ø–æ–º–µ—Ç–∫–æ–π ¬´–£–Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–æ –æ—Ç Object¬ª. –ß—Ç–æ –∂–µ, <a href="https://docs.microsoft.com/ru-ru/dotnet/api/system.object.equals?view=net-6.0#System_Object_Equals_System_Object_">—Ç—É–¥–∞</a> –∏ –ª–µ–∂–∏—Ç –Ω–∞—à –ø—É—Ç—å! –¢–∞–º –≤ —Å–µ–∫—Ü–∏–∏ ¬´–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏¬ª –º—ã –º–æ–∂–µ–º —É–∑–Ω–∞—Ç—å, —á—Ç–æ:</p>
<blockquote>
<p>–ï—Å–ª–∏ —Ç–µ–∫—É—â–∏–π —ç–∫–∑–µ–º–ø–ª—è—Ä —è–≤–ª—è–µ—Ç—Å—è —Å—Å—ã–ª–æ—á–Ω—ã–º —Ç–∏–ø–æ–º, Equals(Object) –º–µ—Ç–æ–¥ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞–≤–µ–Ω—Å—Ç–≤–æ —Å—Å—ã–ª–æ–∫, –∞ –≤—ã–∑–æ–≤ Equals(Object) –º–µ—Ç–æ–¥–∞ —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–µ–Ω –≤—ã–∑–æ–≤—É ReferenceEquals –º–µ—Ç–æ–¥–∞. –†–∞–≤–µ–Ω—Å—Ç–≤–æ —Å—Å—ã–ª–æ–∫ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ–º—ã–µ –æ–±—ä–µ–∫—Ç–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Å—ã–ª–∞—é—Ç—Å—è –Ω–∞ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –æ–±—ä–µ–∫—Ç.</p>
</blockquote>
<p>–ù–∞ —ç—Ç–æ–º, –∫–∞–∑–∞–ª–æ—Å—å, –º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã –∑–∞–≤–µ—Ä—à–∏—Ç—å –Ω–∞—à–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ, –Ω–æ –¥–∞–≤–∞–π—Ç–µ –Ω–∞ –ø–æ—Å–ª–µ–¥–æ–∫ –ø—Ä–∏–¥—É–º–∞–µ–º, –∫–∞–∫ –∑–∞—Å—Ç–∞–≤–∏—Ç—å Except –ø–µ—Ä–µ—Å—Ç–∞—Ç—å –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ñ–∞–π–ª—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å –º–æ–∏–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏.</p>
<p>–í–∞—Ä–∏–∞–Ω—Ç –∏–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ ¬´–ø–æ–∫–∞ —Ç–∞–∫, –ø–æ—Ç–æ–º –ø–æ—Ñ–∏–∫—à—É¬ª:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-csharp" data-lang="csharp"><span style="color:#66d9ef">var</span> documentsDir = <span style="color:#66d9ef">new</span> DirectoryInfo(Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments));
FileInfo[] result1 = documentsDir.GetFiles();
FileInfo[] result2 = documentsDir.GetFiles();
<span style="color:#66d9ef">foreach</span> (FileInfo item <span style="color:#66d9ef">in</span> result1
                                 .Select(i =&gt; i.FullName)
                                 .Except(result2.Select(i =&gt; i.FullName))
                                 .Select(i =&gt; <span style="color:#66d9ef">new</span> FileInfo(i)))
{
    Console.WriteLine(item.Name);
}

</code></pre></div><p>–ú—ã, –ø–æ —Å—É—Ç–∏, –≤—ã–∑—ã–≤–∞–µ–º Except –¥–ª—è –¥–≤—É—Ö IEnumerate<!-- raw HTML omitted -->, –∞ –ø–æ—Ç–æ–º –∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Å–Ω–æ–≤–∞ —Å–æ–±–∏—Ä–∞–µ–º IEnumerate<!-- raw HTML omitted -->.</p>
<p>–í —Å–≤–µ–∂–µ–º .net6 –µ—â–µ –º–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è <a href="https://docs.microsoft.com/en-us/dotnet/api/system.linq.enumerable.exceptby?view=net-6.0">ExceptBy</a>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-csharp" data-lang="csharp"><span style="color:#66d9ef">var</span> documentsDir = <span style="color:#66d9ef">new</span> DirectoryInfo(Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments));
FileInfo[] result1 = documentsDir.GetFiles();
FileInfo[] result2 = documentsDir.GetFiles();
<span style="color:#66d9ef">foreach</span> (FileInfo item <span style="color:#66d9ef">in</span> result1.ExceptBy(result2.Select(i =&gt; i.FullName), ks =&gt; ks.FullName))
{
    Console.WriteLine(item.Name);
}
</code></pre></div><p>–≠—Ç–æ—Ç –∫–æ–¥ —É–∂–µ –≤—ã–≥–ª—è–¥–∏—Ç –ø—Ä–∏—è—Ç–Ω–µ–µ –∏ –¥–∞–∂–µ –∏–∑–±–∞–≤–ª—è–µ—Ç –Ω–∞—Å –æ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ä–∞–∑–±–∏—Ä–∞—Ç—å –∏ —Å–Ω–æ–≤–∞ —Å–æ–±–∏—Ä–∞—Ç—å –∏–∑–Ω–∞—á–∞–ª—å–Ω—ã–π –º–∞—Å—Å–∏–≤, –Ω–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ –∏–Ω–∞—á–µ.</p>
<p>–°–ª–µ–¥—É—é—â–µ–π –∏–¥–µ–µ–π, –ø–æ—Å–µ—Ç–∏–≤—à–µ–π –º–æ—é –≥–æ–ª–æ–≤—É, –±—ã–ª–æ —É–Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å FileInfo –∏ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å Equals, –Ω–æ, –∫ —Å–æ–∂–∞–ª–µ–Ω–∏—é, FileInfo —è–≤–ª—è–µ—Ç—Å—è –∑–∞–ø–µ—á–∞—Ç–∞–Ω–Ω—ã–º (sealed) –∫–ª–∞—Å—Å–æ–º, –∞ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –æ–Ω –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —É–Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω, —Ç–∞–∫ —á—Ç–æ —ç—Ç–æ—Ç –ø—É—Ç—å –Ω–∞–º –æ—Ç—Ä–µ–∑–∞–Ω.</p>
<p>–ü–æ–¥–æ–π–¥–µ–º –∫ –≤–æ–ø—Ä–æ—Å—É —Å –¥—Ä—É–≥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã. –í—Å–ø–æ–º–Ω–∏–º, —á—Ç–æ Equals –∏–º–µ–µ—Ç –ø–µ—Ä–µ–≥—Ä—É–∑–∫—É, –ø—Ä–∏–Ω–∏–º–∞—é—â—É—é –≤—Ç–æ—Ä—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º IEqualityComparer, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–º —Å–æ–∑–¥–∞—Ç—å —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ —Ç–∞–∫–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-csharp" data-lang="csharp"><span style="color:#66d9ef">var</span> documentsDir = <span style="color:#66d9ef">new</span> DirectoryInfo(Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments));
FileInfo[] result1 = documentsDir.GetFiles();
FileInfo[] result2 = documentsDir.GetFiles();

<span style="color:#66d9ef">foreach</span> (FileInfo item <span style="color:#66d9ef">in</span> result1.Except(result2, <span style="color:#66d9ef">new</span> CustomFileInfoComparer()))
{
    Console.WriteLine(item.Name);
}

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">CustomFileInfoComparer</span> : IEqualityComparer&lt;FileInfo&gt;
{
    <span style="color:#66d9ef">bool</span> IEqualityComparer&lt;FileInfo&gt;.Equals(FileInfo? lhv, FileInfo? rhv)
       =&gt; lhv?.FullName == rhv?.FullName;
    <span style="color:#66d9ef">int</span> IEqualityComparer&lt;FileInfo&gt;.GetHashCode(FileInfo obj) =&gt; obj.FullName.GetHashCode();
}

</code></pre></div><p>–≠—Ç–æ —Ä–µ—à–µ–Ω–∏–µ —Ö–æ—Ä–æ—à–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –≤ —Ç–æ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –¥–∞–ª—å—à–µ –ø–æ –∫–æ–¥—É –≤–∞–º –ø—Ä–µ–¥—Å—Ç–æ–∏—Ç –µ—â–µ —Ö–æ—Ç—è –±—ã —Ä–∞–∑ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å IEnumerable<!-- raw HTML omitted -->.</p>
<p>–ù–∞ —ç—Ç–æ–º —É –º–µ–Ω—è –≤—Å–µ, –Ω–∞–¥–µ—é—Å—å, —á—Ç–æ —á–∏—Ç–∞—Ç–µ–ª—å –Ω–∞—à–µ–ª –ª—é–±–æ–ø—ã—Ç–Ω—ã–º –º–æ–π —Å–∫—Ä–æ–º–Ω—ã–π —Ç—Ä—É–¥.</p>
<p>–•–æ—á–µ—Ç—Å—è –≤—ã—Ä–∞–∑–∏—Ç—å –æ–≥—Ä–æ–º–Ω—É—é –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å –º–æ–µ–π –∂–µ–Ω–µ –∑–∞ –ø–æ–º–æ—â—å –≤ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–µ –¥–∞–Ω–Ω–æ–≥–æ –ø–æ—Å—Ç–∞, –∞ —Ç–∞–∫–∂–µ —Å–æ–æ–±—â–µ—Å—Ç–≤—É <a href="https://t.me/dotnettalks">.NET TalksüéÑ</a></p>
</span>



    </div>
    <style>
    h1 {
         
        color: #23E298;
        line-height: 6vmin;
        font-size: 6vmin;
    }

    
    #block {
        max-height: 200px;
    }
    ul ::marker {
        
        content: "-rw-rw-r--";

    }

    a, strong, ::marker,
    #date {
        color: #D08010;

    }
    table, td{
        border-collapse: collapse;
        border: 2px solid #D08010;
        max-width: 100%;
    }
    td{
        padding: 25px;
    }
    li a {
        font-family: -apple-system, BlinkMacSystemFont, Arial, sans-serif;
        font-size: 0.5rem;
        line-height: 1.56;
    }

    li {
        padding-left: 2%;


    }
    a{
        text-decoration: none;
    }
    img{
        max-width: 100%;
    }
    #content {
        font-size: 0.5rem;
        line-height: 1.56;
        overflow-wrap: break-word;
        font-family: -apple-system, BlinkMacSystemFont, Arial, sans-serif;
    }
    #content{
        color:#BBBBBB;
    }
</style>


    
    <span class="navFull">
        
    
    

    
        

<span>
    <a href="/">Home</a>
    <span>&#8192;|&#8192;</span>
    <a href="./..">/articles/</a>
</span>

    

        
        <span class="navCredits">
            Hugo theme created by
            <a href="https://github.com/Yukuro/hugo-theme-shell" target="_blank" rel="noopener">Yukuro</a>
        </span>
</span>


    

    

</body>

</html>